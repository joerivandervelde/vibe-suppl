printf 'geneId\tdiseaseId\tsource\tcount\n' > complete_gene_disease_source_associations.tsv && gzip -cd all_gene_disease_pmid_associations.tsv.gz | awk -F $'\t' 'NR>1 {print $1 "\t" $2 "\t" $7}' | sort | uniq -c | sed -e 's/ *//' -e $'s/ /\t/' | awk -F $'\t' '{print $2 "\t" $3 "\t" $4 "\t" $1}' >> complete_gene_disease_source_associations.tsv && gzip complete_gene_disease_source_associations.tsv

printf 'geneId\tdiseaseId\tnAssociations\tnSources\tsources\n' > complete_gene_disease_associations.tsv && gzip -cd complete_gene_disease_source_associations.tsv.gz | awk -F $'\t' 'NR>1 {nAssociations[$1"\t"$2]+=$4; nSources[$1"\t"$2]++; sources[$1"\t"$2]=sources[$1"\t"$2] ";" $3 "=" $4} END{for(geneDisease in nAssociations) print geneDisease "\t" nAssociations[geneDisease] "\t" nSources[geneDisease] "\t" substr(sources[geneDisease],2)}' | sort >> complete_gene_disease_associations.tsv && gzip complete_gene_disease_associations.tsv

printf 'geneId\tdiseaseId\tsource\tcount\n' > complete_gene_phenotype_source_associations.tsv && gzip -cd all_gene_disease_pmid_associations.tsv.gz | awk -F $'\t' 'NR>1 {if ($9 == "phenotype") print $1 "\t" $2 "\t" $7}' | sort | uniq -c | sed -e 's/ *//' -e $'s/ /\t/' | awk -F $'\t' '{print $2 "\t" $3 "\t" $4 "\t" $1}' >> complete_gene_phenotype_source_associations.tsv && gzip complete_gene_phenotype_source_associations.tsv

printf 'geneId\tdiseaseId\tnAssociations\tnSources\tsources\n' > complete_gene_phenotype_associations.tsv && gzip -cd complete_gene_phenotype_source_associations.tsv.gz | awk -F $'\t' 'NR>1 {nAssociations[$1"\t"$2]+=$4; nSources[$1"\t"$2]++; sources[$1"\t"$2]=sources[$1"\t"$2] ";" $3 "=" $4} END{for(geneDisease in nAssociations) print geneDisease "\t" nAssociations[geneDisease] "\t" nSources[geneDisease] "\t" substr(sources[geneDisease],2)}' | sort >> complete_gene_phenotype_associations.tsv && gzip complete_gene_phenotype_associations.tsv
